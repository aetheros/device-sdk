<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AOS Device SDK: AOS Device App SDK Sample Application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AOS Device SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">AOS Device App SDK Sample Application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Quick Start Guide</h1>
<h2>1. Install the SDK.</h2>
<p>Download the SDK installer and run it. It will prompt you for an install location.</p>
<div class="fragment"><div class="line">aos SDK installer version v6.0.6</div>
<div class="line">==========================================</div>
<div class="line">Enter target directory for SDK (default: /usr/local/aos-esr1k-x86_64):</div>
</div><!-- fragment --><p>Here's a complete example of installing the SDK under /opt/tools:</p>
<div class="fragment"><div class="line">$ ./aos-esr1k-metersim-toolchain-v6.0.6.sh</div>
<div class="line">aos SDK installer version v6.0.6</div>
<div class="line">=====================================</div>
<div class="line">Enter target directory for SDK (default: /usr/local/aos-esr1k-x86_64): /opt/tools/aos-esr1k-x86_64</div>
<div class="line">You are about to install the SDK to &quot;/opt/tools/aos-esr1k-x86_64&quot;. Proceed[Y/n]? &lt;Enter&gt;</div>
<div class="line">Extracting SDK......................done</div>
<div class="line">Setting it up...done</div>
<div class="line">SDK has been successfully set up and is ready to be used.</div>
<div class="line">Each time you wish to use the SDK in a new shell session, you need to source the environment setup script e.g.</div>
<div class="line">$ . /opt/tools/aos-esr1k-x86_64/environment-setup-armv7a-vfp-neon-oe-linux-gnueabi</div>
</div><!-- fragment --><h2>2. Clone the sample app from <a href="https://github.com/aetheros/aos-metering-app.git">github</a>.</h2>
<div class="fragment"><div class="line">git clone https://github.com/aetheros/aos-metering-app.git</div>
<div class="line">cd aos-metering-app</div>
</div><!-- fragment --><h2>3. Build the sample app using the SDK toolchain.</h2>
<p>To use the SDK, source its environment file. This sets up the current shell environment for using the SDK toolchain. Then run <code>make</code> to build the app.</p>
<div class="fragment"><div class="line">. /opt/tools/aos-esr1k-x86_64/environment-setup-armv7a-vfp-neon-oe-linux-gnueabi</div>
<div class="line">make</div>
</div><!-- fragment --><p>Alternatively, you can use the convenience wrapper scripts provided in the aos-metering-app repo:</p>
<ul>
<li><code>./make_app</code> - Build <code>aos_metering_app</code>.</li>
<li><code>./aospkg</code> - Create an unsigned AOS package.</li>
<li><code>./aossignpkg</code> - Create a signed AOS package.</li>
<li><code>./aosapp</code> - Install, Uninstall, Activate, and Deactivate the app on a connected development device.</li>
</ul>
<p>Each one of these scripts simply sources <code>./aos.sh</code>, which in turn sources the SDK environment-setup script, and then either runs <code>make</code> (in the case of <code>make_app</code>), or runs the identically named tool that comes with the SDK (<code>aospkg</code>, <code>aossignpkg</code>, <code>aosapp</code>).</p>
<p>If you installed the SDK in the default location, or alternatively in <code>/opt/tools/aos-esr1k-x86_64</code>, then <code>aos.sh</code> will find it automatically. Otherwise, you will need to set an <b>AOS_SDK_ROOT</b> environment variable to the location of your SDK installation directory.</p>
<p>Example: </p><div class="fragment"><div class="line">$ export AOS_SDK_ROOT=/home/bob/aossdk  # set AOS_SDK_ROOT to the non-standard location where you installed the sdk</div>
<div class="line">$ ./make_app clean                      # clean build artifacts from previous build</div>
<div class="line">rm -f aos_metering_app aos_metering_app.o aos_metering_app.d *.aos</div>
<div class="line">$ ./make_app                            # build the app</div>
<div class="line">arm-oe-linux-gnueabi-g++  -march=armv7-a -mfloat-abi=softfp -mfpu=neon --sysroot=/home/bob/aossdk/sysroots/armv7a-vfp-neon-oe-linux-gnueabi  -O2 -fexpensive-optimizations -frename-registers -fomit-frame-pointer -ftree-vectorize   -Wno-error=maybe-uninitialized -finline-functions -finline-limit=64  -fstack-protector-strong -pie -fpie -Wa,--noexecstack  -std=gnu++14 -MMD -MP -Ilib   -c -o aos_metering_app.o aos_metering_app.cpp</div>
<div class="line">arm-oe-linux-gnueabi-g++  -march=armv7-a -mfloat-abi=softfp -mfpu=neon --sysroot=/home/bob/aossdk/sysroots/armv7a-vfp-neon-oe-linux-gnueabi -o aos_metering_app aos_metering_app.o -Wl,-O1 -Wl,--hash-style=gnu -Wl,--as-needed -Wl,-z,relro,-z,now,-z,noexecstack -Wl,-rpath,/polnet/lib -lsdk_m2m -lsdk_aos -laosgen -lm2mgen -lxsd -lcoap -ldtls -lcommon -lappfw</div>
<div class="line">$</div>
</div><!-- fragment --><h2>4. Install the app on a device and activate it.</h2>
<p>Connect a device to your host via USB. Make sure you have the <code>adb</code> command installed. On Ubuntu, it is in the <b>android-tools-adb</b> package.</p>
<p>Use the <b>aosapp</b> command to install and activate the app. Run <code>./aosapp install</code> to install the app on the connected device. Use the <code>-s &lt;serialno&gt;</code> option if there are multiple devices connected. If the application installs successfully, it can then be activated with <code>./aosapp activate</code>.</p>
<p>Run <code>./aosapp -h</code> to see the list of options. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
